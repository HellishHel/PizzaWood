var clientNameInputs=document.querySelectorAll(".client-name");clientNameInputs.forEach((e=>{e.addEventListener("keydown",(function(e){46==e.keyCode||8==e.keyCode||9==e.keyCode||27==e.keyCode||65==e.keyCode&&!0===e.ctrlKey||e.keyCode>=35&&e.keyCode<=39||(e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105)&&e.preventDefault()}))}));var moneyInputs=document.querySelectorAll(".input-money");moneyInputs.forEach((e=>{var n=e.value;String(n).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")}));var inputPrice=document.querySelector("#input-price"),inputPriceRange=document.querySelector("#input-price-range"),inputPeriod=document.querySelector("#input-period"),inputPeriodRange=document.querySelector("#input-period-range");function calculator(){var e,n,t=document.querySelector("#avarage-purchase"),r=document.querySelector("#avarage-earnings"),u=document.querySelector("#avarage-rent"),a=document.querySelector("#avarage-salary"),o=document.querySelector("#materials"),i=document.querySelector("#other-costs"),l=document.querySelectorAll(".net-profit"),c=[];function d(){var e;r.value=inputPrice.value*t.value,e=(r.value-u.value-a.value-o.value-i.value)*inputPeriod.value,c.forEach((n=>{n.innerHTML=String(e).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")}))}function p(e,n){var t=(e=Math.abs(e)%1e4)%10;return e>10&&e<20?e+" "+n[2]:t>1&&t<5?e+" "+n[1]:1==t?e+" "+n[0]:e+" "+n[2]}l.forEach((e=>{c.push(e.querySelector("span"))})),document.querySelectorAll(".option-radio-label").forEach((e=>{e.onclick=function(n){var t=e.querySelector("input");t.setAttribute("checked","checked"),"familycafe"===t.id&&(u.setAttribute("value","400000"),i.setAttribute("value","1400600")),"foodcourt"===t.id&&(u.setAttribute("value","320000"),i.setAttribute("value","1001600"));var r=new Event("change");document.querySelectorAll(".input-money-wrap").forEach((function(e){e.querySelector(".input-money").dispatchEvent(r)})),d()}})),d(),e=document.querySelectorAll(".goods-sold"),n=.81875*t.value,e.forEach((e=>{"pizza-sold"===e.id&&(e.innerHTML=p(Math.round(.6082*n),["штука","штуки","штук"])),"salads-sold"===e.id&&(e.innerHTML=p(Math.round(.0293*n),["штука","штуки","штук"])),"coffee-sold"===e.id&&(e.innerHTML=p(Math.round(.245*n),["стакан","стакана","стаканов"])),"desserts-sold"===e.id&&(e.innerHTML=p(Math.round(.0195*n),["штука","штуки","штук"])),"main-course-sold"===e.id&&(e.innerHTML=p(Math.round(.098*n),["штука","штуки","штук"]))})),document.querySelectorAll(".input-wrap").forEach((e=>{var n=e.querySelector("input"),t=e.querySelector(".input-span");n.classList.contains("input-money")?(t.innerHTML=String(n.value).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")+" ₽",n.onchange=function(){t.innerHTML=String(n.value).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")+" ₽"}):n.classList.contains("input-period")?(t.innerHTML=p(String(n.value).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 "),[" месяц"," месяца"," месяцев"]),n.onchange=function(){t.innerHTML=p(String(n.value).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 "),[" месяц"," месяца"," месяцев"])}):n.classList.contains("input-numerable")&&(t.innerHTML=String(n.value).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 "),n.onchange=function(){t.innerHTML=String(n.value).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")}),n.style.display="none",""!==n.getAttribute("disabled")&&(t.style.backgroundColor="#FFFFFF",t.onclick=function(e){e.target.style.display="none",n.style.display="inline-block",n.focus()},n.onblur=function(e){e.target.style.display="none",t.style.display="inline-block"})}))}inputPrice.value=inputPriceRange.value,inputPriceRange.addEventListener("input",(function(){inputPrice.value=this.value,calculator()})),inputPrice.addEventListener("keyup",(function(){inputPriceRange.value=this.value,calculator()})),inputPeriodRange.addEventListener("input",(function(){inputPeriod.value=this.value,calculator()})),inputPeriod.addEventListener("keyup",(function(){inputPeriodRange.value=this.value,calculator()})),document.querySelectorAll(".input-money").forEach((function(e){e.style.display="none"})),calculator();
